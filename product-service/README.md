# Product Service

Manages product catalog and provides search/filter APIs.

**Base URL:** `http://localhost:8081/api/v1/products`

## Endpoints

| Method | Path | Description |
|--------|------|-------------|
| POST   | `/`  | Create new product (JSON body) |
| GET    | `/{id}` | Retrieve product by ID |
| PUT    | `/{id}` | Update existing product (JSON body) |
| DELETE | `/{id}` | Delete product |
| GET    | `/`    | Search products (`name`, `category`, `page`, `size`) |

## Sample Requests

Create product:
```
POST /api/v1/products
{
  "name": "Widget",
  "description": "A useful widget",
  "category": "Widgets",
  "price": 12.99,
  "stock": 100
}
```

Search by name:
```
GET /api/v1/products?name=widget&page=0&size=10
```

## Database schema (H2)

```sql
CREATE TABLE products (
  id BIGINT AUTO_INCREMENT PRIMARY KEY,
  name VARCHAR(255) NOT NULL,
  description VARCHAR(255),
  category VARCHAR(255) NOT NULL,
  price DECIMAL(19,2) NOT NULL,
  stock INTEGER NOT NULL
);
```

## Configuration

### Kafka Events

- Consumes `OrderCreatedEvent` from topic `orders` to decrement stock.
- Publishes `ProductStockUpdatedEvent` to topic `product-stock`.

Memory H2 database configured in `application.yml`. Schema is auto-generated by Hibernate with `ddl-auto: update`.

## Running

```
cd product-service
mvn spring-boot:run
```
